var GNLY={init:()=>{google.load("visualization","1",{packages:["controls"],callback:GNLY.drawTableChart});var e=document.querySelector("#gnly-analytics-report-area");void 0!=e&&null!=e&&(GNLY.reportFilters=e.querySelectorAll(".gnly-report-filter"),GNLY.loader=e.querySelector(".gnly-loader"),GNLY.reportFilters.forEach(e=>{GNLY[e.id]=e.value,e.addEventListener("change",()=>{GNLY[e.id]=e.value,GNLY.fetchReport()})}),GNLY.fetchReport())},fetchReport:()=>{GNLY.loader.setAttribute("state","on");var e={action:"gnly_analytics_report",security:gnlyObj.security,projectId:GNLY.profileId,from:GNLY.period,to:"yesterday"};jQuery.post(gnlyObj.ajaxurl,e,function(e){GNLY.drawTableChart(e)}).done(()=>{GNLY.loader.setAttribute("state","off")}).fail(()=>{alert("Request failure.")})},drawTableChart:e=>{var t={showRowNumber:!0,width:"100%",height:"600",pageSize:document.querySelector("#gnly-per-page").value};data=google.visualization.arrayToDataTable(e);var a=new google.visualization.Dashboard(document.querySelector("#gnly-dashboard")),r=new google.visualization.ControlWrapper({controlType:"StringFilter",containerId:"gnly-report-search-filter",options:{filterColumnIndex:0,matchType:"any"}}),o=new google.visualization.ControlWrapper({controlType:"StringFilter",containerId:"gnly-report-cat-filter",options:{filterColumnIndex:0,matchType:"any"}}),i=new google.visualization.ChartWrapper({chartType:"Table",containerId:"view-selector-container",options:t});a.bind([r,o],[i]),a.draw(data),document.querySelector("#gnly-cat-filter-spoof").addEventListener("change",function(){var e=document.querySelector("#gnly-report-cat-filter input");e.value=this.value,e.dispatchEvent(new Event("keyup"))})}};document.addEventListener("DOMContentLoaded",()=>{GNLY.init()});